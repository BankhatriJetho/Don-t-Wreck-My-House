## Project Plan: Don't Wreck My House
**Java Console Application with Spring Dependency Injection**

---

## Project Overview
**Don't Wreck My House** is a Java-based console application that simulates a lightweight accommodation reservation system. 
The application is operated by an **administrator** who can view, add, update, or cancel reservations between **guests** and 
**hosts**.

All data is managed through **CSV files** only. The project focuses on applying clean coding 
practices, layered architecture, and Spring Dependency Injection using annotations.

---

## Application User

The application is designed for an **Accommodation Administrator**, who performs the following actions:

- View all reservations for a host
- Create a new reservation between a guest and a host
- Edit an existing reservation (only dates can be changed)
- Cancel a future reservation

---

## Project Structure

This project follows a **three-layer architecture**:

### 1. `models`
Defines the application's data models: `Guest`, `Host`, `Reservation`.

### 2. `data`
Handles all CSV file interactions. This includes reading and writing to:
- `guests.csv` (all guests)
- `hosts.csv` (all hosts)
- `{host-id}.csv` (individual reservation files per host)

### 3. `domain`
Contains business logic and rules - e.g., validation, availability checks.

### 4. `ui`
Handles console-based user interaction - navigation menus, prompts, and outputs.

com.dwmyhouse
├── data         -> All file read/write logic (@Repository)
│   ├── GuestRepository
│   ├── HostRepository
│   └── ReservationRepository
│
├── domain       -> Business logic (@Service)
│   ├── GuestService
│   ├── HostService
│   └── ReservationService
│
├── models       -> (Guest, Host, Reservation)
│
├── ui           -> Console UI & Menu handling (@Component)
│   ├── Controller
│   └── View
│
└── App.java     -> Main class
---

## Models

### Guest
```java
String guestId;
String firstName;
String lastName;
String email;
String phone;
String state;
```

### Host
```java
String id;
String lastName;
String email;
String phone;
String address;
String city;
String state;
String postalCode;
BigDecimal standardRate;
BigDecimal weekendRate;
```

### Reservation
```java
int id; // unique per host, autogenerated
LocalDate startDate;
LocalDate endDate;
String guestId;
BigDecimal total;
```

---

## File Format Expectations

- All data is stored in CSV files.
- `guests.csv` and `hosts.csv` contain header rows and are comma-delimited.
- Each host has their own reservation file named after their ID: `{host-id}.csv`

Example:
```
data/
├── guests.csv
├── hosts.csv
└── reservations/
    ├── c6567347-6c57-4658-a2c7-50040eeeb80f.csv
    ├── 54508cfa-4f67-4de8-9437-6f27d65b0af0.csv
    └── ...
```

---

## Validation Rules

- Reservation **must be in the future**
- **Start date must be before end date**
- Dates **must not overlap** with existing reservations
- Guest and Host must **already exist**
- **Only future reservations** can be cancelled

---

## Testing Strategy

- All business logic is tested using **JUnit 5**
- **Test doubles** will be used for file repositories to isolate domain logic
- Tests ensure edge cases like:
    - Overlapping reservations
    - Invalid date ranges
    - Cancellations of past reservations
    - Missing guest or host
- Production data is **never used** in tests

---

## Tools & Technologies

- Java 17
- Maven
- Spring (Dependency Injection with annotations)
- JUnit 5
- `LocalDate` for date logic
- `BigDecimal` for financial calculations
- Manual CSV file

---

## Deliverables

- A Java Maven project with clean 3-layer architecture
- All source code under `src/main/java/com/dwmyhouse/`
- Spring Dependency Injection using annotations or XML
- Models: `Guest`, `Host`, and `Reservation`
- CSV-based data access using custom file repositories
- Business logic encapsulated in domain services
- Console-based UI to view, create, edit, and cancel reservations
- Full set of unit tests using JUnit5
- Usage of test doubles to test domain logic
- Proper error handling and edge case validations
- `Don't-Wreck-My-House-Project-Plan.md` inside `docs/`

## Stretch Goals -- on a separate branch (if pursued)

- Add/Edit/Delete Guests and Hosts
- Display reservations by guest or by city/state
- Use JSON file format instead of CSV
- Auto-generate global reservation IDs (unique across system)
